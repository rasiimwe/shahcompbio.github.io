
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>postpy | Shah Lab</title>
    
    <meta name="author" content="Sohrab P. Shah">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <!-- Bootstrap styles -->
    <link href="/assets/themes/lab/bootstrap/css/bootstrap.min.css" rel="stylesheet"/>
    <!-- Optional theme -->
    <link href="/assets/themes/lab/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet"/>
    <!-- Sticky Footer -->
    <link href="/assets/themes/lab/bootstrap/css/bs-sticky-footer.css" rel="stylesheet"/>
    
    <!-- Custom styles -->
    <link href="/assets/themes/lab/css/style.css?body=1" rel="stylesheet" type="text/css" media="all"/>

    <!-- icon -->
    <link rel="icon" type="image/png" href="/assets/themes/lab/images/logo/favicon.png"/>

    <!-- Custom fonts and icons via Font Awesome, http://fortawesome.github.io/Font-Awesome/ -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"/>

    <!-- Fonts via Google -->
    <link href='http://fonts.googleapis.com/css?family=Lato:300italic,700italic,300,700' rel='stylesheet' type='text/css'/>

    <!-- Math via MathJax -->
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!-- Update these with your own images
      <link rel="shortcut icon" href="images/favicon.ico">
      <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->

    <!-- atom & rss feed
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
    -->

  </head>

  <body>

  <!-- Static top navbar -->

  <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class='container'>
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#jb-navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="/">
        <img class="pull-left logo" src="/assets/themes/lab/images/logo/lab-logo.svg" type="image/svg+xml">
        </a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="jb-navbar-collapse">
        <ul class="nav navbar-nav navbar-left hidden-sm">
          <!-- Don't put site title on home page -- there's already a big title there. -->
          
          
          
          <a class="navbar-brand" href="/">Shah Lab</a>
          
        </ul>
        <ul class="nav navbar-nav navbar-right pull-right">
          
          
          


  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/research">Research</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/blog/">Blog</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/papers/">Papers</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/projects/">Software</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/team/">Team</a></li>
      	
      
    
  



          <!--<li class="dropdown nav navbar-nav">-->
            <!--<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">-->
              <!--More <span class="caret"></span>-->
            <!--</a>-->

            <!--<ul class="dropdown-menu nav navbar-nav" role="menu">-->
              <!---->
              <!---->
              <!--


  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  


-->
            <!--</ul>-->
          <!--</li>-->
        </ul>
      </div><!-- /.navbar-collapse -->
    </nav>
   </div>

   <!-- Content -->
   <div class="container">
      
<div class="page-header">
  <div class="title media-heading">postpy</div>
  
</div>

<div class="row post-full">
  <div class="col-xs-12">
    <div class="date">
      <span></span>
    </div>
    <div class="content">
      <p><a href="https://github.com/shahcompbio/postpy">Fork me on GitHub!</a></p>

<h2 id="usage"><strong>Usage</strong></h2>

<h3 id="1-finding-the-snvs-with-wide-posterior-distribution">1. Finding the SNVs with wide posterior distribution:</h3>
<p>You can use CI_filter.py for this purpose. This tool calculates the quantile based credible interval for the prevalence of each SNV. The arguments are as follows:</p>

<table>
  <thead>
    <tr>
      <th>Argument</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>-i</td>
      <td>size of the quantile-based credible interval, CI, for the prevalence of each SNV. i must be a number between 0 and 100. (see below for more details on how to obtain a quantile-based credible interval)</td>
    </tr>
    <tr>
      <td>-r</td>
      <td>the fraction of samples allowed to have CIs that exceed a maximum designated length. CI_filter.py considers designated lengths between 0.1 and 0.9 with 0.1 increments.</td>
    </tr>
    <tr>
      <td>-c</td>
      <td>path to the PyClone config file. Please note that if you have copied PyClone results from their original location, you need to update working_dir and trace_dir parameters in the config file.</td>
    </tr>
    <tr>
      <td>-o</td>
      <td>path to the analysis results.</td>
    </tr>
    <tr>
      <td>-b</td>
      <td>burnin for the posterior distribution.</td>
    </tr>
  </tbody>
</table>

<h4 id="output-files"><strong>Output files:</strong></h4>
<p>CI_filter.py generates 10 files in the path that you are specified in -o argument.</p>

<ol>
  <li>summary_*.csv contains the fraction of SNVs with i% CI spanning longer than each maximum designated length in more than (100 x r)% of the samples.</li>
  <li>For each maximum length X there is a file named snps_list_CI_X_node_rej_r.csv. This file contains a comma separated list of the SNVs with CIs that exceed the maximum allowed CI length in more than (100 x r)% of the samples.</li>
</ol>

<h3 id="2-removing-the-snvs-with-non-informative-posterior-distributions-for-short-non-informative-snvs"><strong>2. Removing the SNVs with non-informative posterior distributions (for short non-informative SNVs)</strong></h3>
<p>After finding the SNVs with large credible intervals in the previous stage using CI_filter.py, the user can apply pyclone_files_updater.py to remove those SNVs from all PyClone files and re-cluster the remaining SNVs.</p>

<p>User needs to decide the set of SNVs to be removed by analyzing the fraction of removable SNVs and the corresponding maximum allowable length of the CIs and use the corresponding file with the list of removable SNVs from stage 1.</p>

<p>The arguments for pyclone_files_updater.py are as follows:</p>

<table>
  <thead>
    <tr>
      <th>Argument</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>-c</td>
      <td>path to the PyClone config file. Please note that if you have copied PyClone results from their original location, you need to update working_dir and trace_dir parameters in the config file.</td>
    </tr>
    <tr>
      <td>-s</td>
      <td>path to the csv file containing the list of the removable SNVs. This file is generated in stage 1.</td>
    </tr>
    <tr>
      <td>-f</td>
      <td>path to the new cluster file. pyclone_files_updater.py clusters the remaining SNVs after removing the non-informative SNVs.</td>
    </tr>
    <tr>
      <td>-b</td>
      <td>burnin for the posterior distribution.</td>
    </tr>
  </tbody>
</table>

<p>Please note that after removing the non-informative SNVs, pyclone_file_updater.py generates new files and keeps the original files by adding .originalto the end of the original files before removing those SNVs.</p>

<h3 id="3-significance-analysis-of-change-of-prevalence-of-clusters-in-multi-sample-experiments"><strong>3. Significance analysis of change of prevalence of clusters in multi-sample experiments</strong></h3>
<p>In multi-sample experiments, prevalence of some clusters may change between samples. It is important to know how significant those changes are. To this end, we can measure for each cluster the overlap of the credible intervals between every pair of samples. If the CIs don’t overlap it means the change in prevalence is statistically significant.</p>

<p>interval_analyser.py can be used for this purpose. The arguments are as follows:</p>

<table>
  <thead>
    <tr>
      <th>Argument</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>-c</td>
      <td>path to the PyClone config file.</td>
    </tr>
    <tr>
      <td>-f</td>
      <td>path to the PyClone cluster file. You need to use the new cluster file, generated in stage 1.</td>
    </tr>
    <tr>
      <td>-o</td>
      <td>path to the analysis results.</td>
    </tr>
    <tr>
      <td>-b</td>
      <td>burnin for the posterior distribution.</td>
    </tr>
    <tr>
      <td>-i</td>
      <td>size of the quantile-based credible interval, CI, for the prevalence of each SNV. i must be a number between 0 and 100.</td>
    </tr>
  </tbody>
</table>

<p>Output file contains 8 columns: cluster id, x1 and x2 (the start and end of the credible interval of the first sample) y1 and y2 (the start and end of the credible interval in the second sample), the mean of the posterior samples of prevalence in the first and second sample and result of the credible interval overlap test. In the last column 0 means no overlap and 1 means overlap of the credible intervals.</p>

    </div>

  <!-- 
    <ul class="tag_box inline">
      <li><i class="glyphicon glyphicon-open"></i></li>
      
      


  
    
  


    </ul>
    

  
    <ul class="tag_box inline">
      <li><i class="glyphicon glyphicon-tags"></i></li>
      
      


  
    
  



    </ul>
   -->  
  
    <hr>
    
  </div>
</div>


   </div>


  <!-- Static bottom navbar -->
  <nav class="navbar navbar-default navbar-fixed-bottom">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#jb-bottom-collapse"> <!-- NOTE! data-target was changed to jb-bottom-collapse -->
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="jb-bottom-collapse">
        <a href=http://molonc.bccrc.ca>
          <img class="logo" alt="BCCA Molecular Oncology" src=/assets/images/bcca_logo.png>
        </a>
        <a href=http://www.ubc.ca/>
          <img class="logo" alt="UBC" src=/assets/images/4_2016_UBCLogo_BlueRGB72.png>
        </a>
        <ul class="nav navbar-nav navbar-right navbar-small">
          <li><a href='/about.html'>About</a></li>
          <li><a href='/join.html'>Join</a></li>
          <li><a href='/contact.html'>Contact</a></li>
        </ul>
      </div><!-- /.navbar-collapse -->
    </div>
  </nav>

    




  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-103919622-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>




    <!-- Latest compiled and minified JavaScript, requires jQuery 1.x (2.x not supported in IE8) -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="/assets/themes/lab/bootstrap/js/bootstrap.min.js"></script>
    <script type='text/javascript' src='https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js'></script>
  </body>
</html>

